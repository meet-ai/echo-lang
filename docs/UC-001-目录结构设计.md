# UC-001-ç›®å½•ç»“æ„è®¾è®¡

## 1. æ•´ä½“æ¶æ„

åŸºäºç¼–è¯‘å™¨æŠ€æœ¯æµç¨‹æ˜ å°„å’Œç”¨ä¾‹åˆ†ç»„åˆ†æï¼ŒEcho Language é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–ç›®å½•ç»“æ„ï¼ŒæŒ‰ç¼–è¯‘å™¨æŠ€æœ¯é˜¶æ®µç»„ç»‡é™ç•Œä¸Šä¸‹æ–‡ã€‚

```
echo-lang/
â”œâ”€â”€ cmd/                          # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ compiler/                 # ç¼–è¯‘å™¨å‘½ä»¤è¡Œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ main.go
â”‚   â”‚   â””â”€â”€ config.go
â”‚   â””â”€â”€ repl/                     # REPL äº¤äº’ç¯å¢ƒ
â”‚       â”œâ”€â”€ main.go
â”‚       â””â”€â”€ config.go
â”œâ”€â”€ internal/                     # ç§æœ‰ä»£ç 
â”‚   â”œâ”€â”€ modules/                  # é™ç•Œä¸Šä¸‹æ–‡æ¨¡å—ï¼ˆæŒ‰ç¼–è¯‘å™¨æŠ€æœ¯é˜¶æ®µï¼‰
â”‚   â”‚   â”œâ”€â”€ frontend/             # å‰ç«¯å¤„ç†åŸŸï¼ˆè¯æ³•/è¯­æ³•/è¯­ä¹‰åˆ†æï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ module.go         # æ¨¡å—å…¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ ports/            # ç«¯å£æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ events/
â”‚   â”‚   â”‚   â”œâ”€â”€ application/      # åº”ç”¨å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ queries/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dtos/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ events/
â”‚   â”‚   â”‚   â”œâ”€â”€ domain/           # é¢†åŸŸå±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ valueobjects/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ exceptions/
â”‚   â”‚   â”‚   â””â”€â”€ infrastructure/   # åŸºç¡€è®¾æ–½å±‚ï¼ˆOCamlå·¥å…·é“¾ï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ adapters/
â”‚   â”‚   â”‚       â”œâ”€â”€ persistence/
â”‚   â”‚   â”‚       â”œâ”€â”€ clients/
â”‚   â”‚   â”‚       â””â”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ middleend/            # ä¸­ç«¯å¤„ç†åŸŸï¼ˆIRç”Ÿæˆä¸ä¼˜åŒ–ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ module.go
â”‚   â”‚   â”‚   â”œâ”€â”€ ports/
â”‚   â”‚   â”‚   â”œâ”€â”€ application/
â”‚   â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”‚   â””â”€â”€ infrastructure/   # åŸºç¡€è®¾æ–½å±‚ï¼ˆLLVM IRï¼‰
â”‚   â”‚   â”œâ”€â”€ backend/              # åç«¯å¤„ç†åŸŸï¼ˆä»£ç ç”Ÿæˆ/æ±‡ç¼–/é“¾æ¥ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ module.go
â”‚   â”‚   â”‚   â”œâ”€â”€ ports/
â”‚   â”‚   â”‚   â”œâ”€â”€ application/
â”‚   â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”‚   â””â”€â”€ infrastructure/   # åŸºç¡€è®¾æ–½å±‚ï¼ˆClang/LLVMï¼‰
â”‚   â”‚   â”œâ”€â”€ runtime/              # è¿è¡Œæ—¶è°ƒè¯•åŸŸï¼ˆæ‰§è¡Œ/è°ƒè¯•/ç›‘æ§ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ module.go
â”‚   â”‚   â”‚   â”œâ”€â”€ ports/
â”‚   â”‚   â”‚   â”œâ”€â”€ application/
â”‚   â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”‚   â””â”€â”€ infrastructure/   # åŸºç¡€è®¾æ–½å±‚ï¼ˆè°ƒè¯•å™¨ã€æ€§èƒ½ç›‘æ§ï¼‰
â”‚   â”‚   â”œâ”€â”€ project/              # é¡¹ç›®ç®¡ç†åŸŸï¼ˆåˆå§‹åŒ–/éƒ¨ç½²ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ module.go
â”‚   â”‚   â”‚   â”œâ”€â”€ ports/
â”‚   â”‚   â”‚   â”œâ”€â”€ application/
â”‚   â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”‚   â””â”€â”€ infrastructure/
â”‚   â”‚   â””â”€â”€ ai/                   # AIç‰¹æ€§åŸŸï¼ˆAgenté…ç½®å’Œä½¿ç”¨ï¼‰
â”‚   â”‚       â”œâ”€â”€ module.go
â”‚   â”‚       â”œâ”€â”€ ports/
â”‚   â”‚       â”œâ”€â”€ application/
â”‚   â”‚       â”œâ”€â”€ domain/
â”‚   â”‚       â””â”€â”€ infrastructure/
â”‚   â”œâ”€â”€ infrastructure/           # å…±äº«åŸºç¡€è®¾æ–½
â”‚   â”‚   â”œâ”€â”€ shared/               # è·¨ä¸Šä¸‹æ–‡å…±äº«ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ cache/
â”‚   â”‚   â”‚   â”œâ”€â”€ logging/
â”‚   â”‚   â”‚   â”œâ”€â”€ metrics/
â”‚   â”‚   â”‚   â””â”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ external/             # å¤–éƒ¨ç³»ç»Ÿé€‚é…å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ aws/
â”‚   â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â””â”€â”€ messaging/
â”‚   â”‚   â””â”€â”€ di/                   # ä¾èµ–æ³¨å…¥å®¹å™¨
â”‚   â”‚       â”œâ”€â”€ container.go
â”‚   â”‚       â””â”€â”€ providers/
â”‚   â””â”€â”€ shared/                   # å†…éƒ¨å…±äº«ç»„ä»¶
â”‚       â”œâ”€â”€ types/                # å…±äº«ç±»å‹å®šä¹‰
â”‚       â”œâ”€â”€ errors/               # é”™è¯¯å¤„ç†
â”‚       â””â”€â”€ utils/                # å·¥å…·å‡½æ•°
â”œâ”€â”€ pkg/                          # å…¬å¼€åŒ…
â”‚   â”œâ”€â”€ ast/                      # AST ç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ parser/                   # è§£æå™¨æ¥å£
â”‚   â””â”€â”€ generator/                # ä»£ç ç”Ÿæˆå™¨æ¥å£
â”œâ”€â”€ examples/                     # ç¤ºä¾‹ä»£ç 
â”‚   â”œâ”€â”€ hello.eo
â”‚   â”œâ”€â”€ fibonacci.eo
â”‚   â””â”€â”€ ai_agent.eo
â”œâ”€â”€ scripts/                      # æ„å»ºå’Œéƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ build.sh
â”‚   â”œâ”€â”€ test.sh
â”‚   â”œâ”€â”€ ci.sh
â”‚   â””â”€â”€ deploy.sh
â”œâ”€â”€ docs/                         # æ–‡æ¡£
â”‚   â”œâ”€â”€ UC-001-*.md               # DDD æ–‡æ¡£
â”‚   â”œâ”€â”€ api/                      # API æ–‡æ¡£
â”‚   â””â”€â”€ guides/                   # ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ testdata/                     # æµ‹è¯•æ•°æ®
â”‚   â”œâ”€â”€ fixtures/
â”‚   â””â”€â”€ samples/
â””â”€â”€ go.mod                        # Go æ¨¡å—å®šä¹‰
```

## 2. æ¨¡å—è¯¦ç»†è®¾è®¡

### 2.1 FrontendContextï¼ˆå‰ç«¯å¤„ç†ä¸Šä¸‹æ–‡ï¼‰

**èŒè´£**: è´Ÿè´£Echo Languageæºä»£ç çš„è¯æ³•ã€è¯­æ³•ã€è¯­ä¹‰åˆ†æ

**ç›®å½•ç»“æ„**:
```
internal/modules/frontend/
â”œâ”€â”€ module.go                     # æ¨¡å—å…¥å£ï¼Œä¾èµ–æ³¨å…¥
â”œâ”€â”€ ports/                        # å¯¹å¤–æ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ ifrontend_service.go      # IFrontendService æ¥å£
â”‚   â”‚   â””â”€â”€ itokenizer_service.go     # ITokenizerService æ¥å£
â”‚   â””â”€â”€ events/
â”‚       â””â”€â”€ analysis_completed_event.go # AnalysisCompletedEvent äº‹ä»¶
â”œâ”€â”€ application/                  # åº”ç”¨å±‚
â”‚   â”œâ”€â”€ services/                 # åº”ç”¨æœåŠ¡å®ç°
â”‚   â”‚   â”œâ”€â”€ frontend_service.go       # FrontendService åº”ç”¨æœåŠ¡
â”‚   â”‚   â””â”€â”€ tokenizer_service.go      # TokenizerService æŸ¥è¯¢æœåŠ¡
â”‚   â”œâ”€â”€ commands/                 # å‘½ä»¤å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ perform_lexical_analysis.go   # PerformLexicalAnalysis å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ perform_syntax_analysis.go    # PerformSyntaxAnalysis å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ perform_semantic_analysis.go  # PerformSemanticAnalysis å‘½ä»¤
â”‚   â”‚   â””â”€â”€ handle_compilation_errors.go  # HandleCompilationErrors å‘½ä»¤
â”‚   â”œâ”€â”€ queries/                  # æŸ¥è¯¢å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ get_analysis_status.go     # GetAnalysisStatus æŸ¥è¯¢
â”‚   â”‚   â””â”€â”€ get_ast_structure.go       # GetASTStructure æŸ¥è¯¢
â”‚   â”œâ”€â”€ dtos/                     # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ analysis_request.go        # AnalysisRequest DTO
â”‚   â”‚   â”œâ”€â”€ analysis_result.go         # AnalysisResult DTO
â”‚   â”‚   â””â”€â”€ ast_dto.go                 # AST DTO
â”‚   â””â”€â”€ events/                   # äº‹ä»¶å¤„ç†å™¨
â”‚       â””â”€â”€ frontend_event_handler.go
â”œâ”€â”€ domain/                      # é¢†åŸŸå±‚
â”‚   â”œâ”€â”€ entities/                # å®ä½“
â”‚   â”‚   â”œâ”€â”€ source_file.go           # SourceFile èšåˆæ ¹
â”‚   â”‚   â”œâ”€â”€ ast_node.go              # ASTNode å®ä½“
â”‚   â”‚   â”œâ”€â”€ token.go                 # Token å®ä½“
â”‚   â”‚   â””â”€â”€ symbol_table.go          # SymbolTable å®ä½“
â”‚   â”œâ”€â”€ valueobjects/             # å€¼å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ token_type.go            # TokenType å€¼å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ ast_node_type.go         # ASTNodeType å€¼å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ error_location.go        # ErrorLocation å€¼å¯¹è±¡
â”‚   â”‚   â””â”€â”€ semantic_info.go         # SemanticInfo å€¼å¯¹è±¡
â”‚   â”œâ”€â”€ services/                 # é¢†åŸŸæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ lexical_analyzer.go      # LexicalAnalyzer é¢†åŸŸæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ syntax_analyzer.go       # SyntaxAnalyzer é¢†åŸŸæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ semantic_analyzer.go     # SemanticAnalyzer é¢†åŸŸæœåŠ¡
â”‚   â”‚   â””â”€â”€ error_handler.go         # ErrorHandler é¢†åŸŸæœåŠ¡
â”‚   â”œâ”€â”€ repositories/             # ä»“å‚¨æ¥å£
â”‚   â”‚   â”œâ”€â”€ source_file_repository.go
â”‚   â”‚   â””â”€â”€ ast_repository.go
â”‚   â”œâ”€â”€ events/                   # é¢†åŸŸäº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ lexical_analysis_completed.go
â”‚   â”‚   â”œâ”€â”€ syntax_analysis_completed.go
â”‚   â”‚   â””â”€â”€ semantic_analysis_completed.go
â”‚   â””â”€â”€ exceptions/               # é¢†åŸŸå¼‚å¸¸
â”‚       â”œâ”€â”€ lexical_error.go
â”‚       â”œâ”€â”€ syntax_error.go
â”‚       â””â”€â”€ semantic_error.go
â””â”€â”€ infrastructure/              # åŸºç¡€è®¾æ–½å±‚ï¼ˆOCamlå·¥å…·é“¾ï¼‰
    â”œâ”€â”€ adapters/                # é€‚é…å™¨
    â”‚   â”œâ”€â”€ ocamllex_adapter.go      # ocamllex è¯æ³•åˆ†æå™¨é€‚é…
    â”‚   â”œâ”€â”€ menhir_adapter.go        # Menhir è¯­æ³•åˆ†æå™¨é€‚é…
    â”‚   â””â”€â”€ ocaml_ast_adapter.go     # OCaml AST å¤„ç†é€‚é…
    â”œâ”€â”€ persistence/              # æ•°æ®æŒä¹…åŒ–
    â”‚   â”œâ”€â”€ repositories/         # ä»“å‚¨å®ç°
    â”‚   â”‚   â””â”€â”€ source_file_repository_gorm.go
    â”‚   â””â”€â”€ models/               # æ•°æ®åº“æ¨¡å‹
    â”‚       â””â”€â”€ source_file_model.go
    â”œâ”€â”€ clients/                  # å¤–éƒ¨å®¢æˆ·ç«¯
    â”‚   â”œâ”€â”€ ocaml_client.go          # OCaml å·¥å…·é“¾å®¢æˆ·ç«¯
    â”‚   â””â”€â”€ error_reporting_client.go # é”™è¯¯æŠ¥å‘Šå®¢æˆ·ç«¯
    â””â”€â”€ config/                   # é…ç½®
        â””â”€â”€ frontend_config.go
```

### 2.2 RuntimeContextï¼ˆè¿è¡Œæ—¶ä¸Šä¸‹æ–‡ï¼‰

**èŒè´£**: è´Ÿè´£ç¨‹åºæ‰§è¡Œã€è°ƒè¯•å’Œè¿è¡Œæ—¶ç®¡ç†

**ç›®å½•ç»“æ„**:
```
internal/modules/runtime/
â”œâ”€â”€ module.go
â”œâ”€â”€ ports/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ iruntime_service.go
â”‚   â”‚   â””â”€â”€ idebug_service.go
â”‚   â””â”€â”€ events/
â”‚       â””â”€â”€ program_executed_event.go
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ runtime_service.go
â”‚   â”‚   â””â”€â”€ debug_service.go
â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â”œâ”€â”€ run_program.go
â”‚   â”‚   â””â”€â”€ start_debug_session.go
â”‚   â”œâ”€â”€ queries/
â”‚   â”‚   â”œâ”€â”€ get_runtime_status.go
â”‚   â”‚   â””â”€â”€ list_running_processes.go
â”‚   â”œâ”€â”€ dtos/
â”‚   â”‚   â”œâ”€â”€ execution_result.go
â”‚   â”‚   â””â”€â”€ debug_session_info.go
â”‚   â””â”€â”€ events/
â”‚       â””â”€â”€ execution_completed_handler.go
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ process.go
â”‚   â”‚   â”œâ”€â”€ debug_session.go
â”‚   â”‚   â””â”€â”€ memory_manager.go
â”‚   â”œâ”€â”€ valueobjects/
â”‚   â”‚   â”œâ”€â”€ execution_status.go
â”‚   â”‚   â””â”€â”€ memory_address.go
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ execution_service.go
â”‚   â”‚   â””â”€â”€ garbage_collector.go
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â””â”€â”€ process_repository.go
â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â””â”€â”€ process_started_event.go
â”‚   â””â”€â”€ exceptions/
â”‚       â””â”€â”€ runtime_error.go
â””â”€â”€ infrastructure/
    â”œâ”€â”€ adapters/
    â”‚   â”œâ”€â”€ gc_adapter.go
    â”‚   â””â”€â”€ debugger_adapter.go
    â”œâ”€â”€ persistence/
    â”‚   â”œâ”€â”€ repositories/
    â”‚   â”‚   â””â”€â”€ process_repository_memory.go
    â”‚   â””â”€â”€ models/
    â”‚       â””â”€â”€ process_model.go
    â”œâ”€â”€ clients/
    â”‚   â””â”€â”€ system_runtime_client.go
    â””â”€â”€ config/
        â””â”€â”€ runtime_config.go
```

### 2.3 AIContextï¼ˆAIç‰¹æ€§ä¸Šä¸‹æ–‡ï¼‰

**èŒè´£**: æä¾›AIåŸç”Ÿç¼–ç¨‹ç‰¹æ€§å’ŒAgentæ”¯æŒ

**ç›®å½•ç»“æ„**:
```
internal/modules/ai/
â”œâ”€â”€ module.go
â”œâ”€â”€ ports/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ iaai_service.go
â”‚   â”‚   â””â”€â”€ iagent_service.go
â”‚   â””â”€â”€ events/
â”‚       â””â”€â”€ agent_state_changed_event.go
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ ai_service.go
â”‚   â”‚   â””â”€â”€ agent_service.go
â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â”œâ”€â”€ configure_agent.go
â”‚   â”‚   â””â”€â”€ use_concurrency.go
â”‚   â”œâ”€â”€ queries/
â”‚   â”‚   â”œâ”€â”€ get_agent_status.go
â”‚   â”‚   â””â”€â”€ list_active_agents.go
â”‚   â”œâ”€â”€ dtos/
â”‚   â”‚   â”œâ”€â”€ agent_config.go
â”‚   â”‚   â””â”€â”€ concurrency_result.go
â”‚   â””â”€â”€ events/
â”‚       â””â”€â”€ agent_configured_handler.go
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ agent.go
â”‚   â”‚   â”œâ”€â”€ state_machine.go
â”‚   â”‚   â””â”€â”€ message.go
â”‚   â”œâ”€â”€ valueobjects/
â”‚   â”‚   â”œâ”€â”€ agent_status.go
â”‚   â”‚   â””â”€â”€ concurrency_mode.go
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ agent_orchestrator.go
â”‚   â”‚   â””â”€â”€ state_manager.go
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â””â”€â”€ agent_repository.go
â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â””â”€â”€ agent_created_event.go
â”‚   â””â”€â”€ exceptions/
â”‚       â””â”€â”€ agent_error.go
â””â”€â”€ infrastructure/
    â”œâ”€â”€ adapters/
    â”‚   â”œâ”€â”€ llm_adapter.go
    â”‚   â””â”€â”€ concurrency_adapter.go
    â”œâ”€â”€ persistence/
    â”‚   â”œâ”€â”€ repositories/
    â”‚   â”‚   â””â”€â”€ agent_repository_redis.go
    â”‚   â””â”€â”€ models/
    â”‚       â””â”€â”€ agent_model.go
    â”œâ”€â”€ clients/
    â”‚   â””â”€â”€ ai_model_client.go
    â””â”€â”€ config/
        â””â”€â”€ ai_config.go
```

### 2.4 ProjectContextï¼ˆé¡¹ç›®ç®¡ç†ä¸Šä¸‹æ–‡ï¼‰

**èŒè´£**: é¡¹ç›®ç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œéƒ¨ç½²æ”¯æŒ

**ç›®å½•ç»“æ„**:
```
internal/modules/project/
â”œâ”€â”€ module.go
â”œâ”€â”€ ports/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ iproject_service.go
â”‚   â””â”€â”€ events/
â”‚       â””â”€â”€ project_created_event.go
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ project_service.go
â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â”œâ”€â”€ create_project.go
â”‚   â”‚   â””â”€â”€ deploy_application.go
â”‚   â”œâ”€â”€ queries/
â”‚   â”‚   â””â”€â”€ get_project_info.go
â”‚   â”œâ”€â”€ dtos/
â”‚   â”‚   â”œâ”€â”€ project_info.go
â”‚   â”‚   â””â”€â”€ deployment_status.go
â”‚   â””â”€â”€ events/
â”‚       â””â”€â”€ project_deployed_handler.go
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ project.go
â”‚   â”‚   â””â”€â”€ deployment.go
â”‚   â”œâ”€â”€ valueobjects/
â”‚   â”‚   â”œâ”€â”€ project_type.go
â”‚   â”‚   â””â”€â”€ deployment_target.go
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ project_builder.go
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â””â”€â”€ project_repository.go
â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â””â”€â”€ deployment_started_event.go
â”‚   â””â”€â”€ exceptions/
â”‚       â””â”€â”€ project_error.go
â””â”€â”€ infrastructure/
    â”œâ”€â”€ adapters/
    â”‚   â””â”€â”€ file_system_adapter.go
    â”œâ”€â”€ persistence/
    â”‚   â”œâ”€â”€ repositories/
    â”‚   â”‚   â””â”€â”€ project_repository_fs.go
    â”‚   â””â”€â”€ models/
    â”‚       â””â”€â”€ project_model.go
    â”œâ”€â”€ clients/
    â”‚   â””â”€â”€ deployment_client.go
    â””â”€â”€ config/
        â””â”€â”€ project_config.go
```

### 2.5 AnalysisContextï¼ˆåˆ†æå·¥å…·ä¸Šä¸‹æ–‡ï¼‰

**èŒè´£**: æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–åˆ†æ

**ç›®å½•ç»“æ„**:
```
internal/modules/analysis/
â”œâ”€â”€ module.go
â”œâ”€â”€ ports/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ ianalysis_service.go
â”‚   â””â”€â”€ events/
â”‚       â””â”€â”€ analysis_completed_event.go
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ analysis_service.go
â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â””â”€â”€ analyze_performance.go
â”‚   â”œâ”€â”€ queries/
â”‚   â”‚   â””â”€â”€ get_analysis_report.go
â”‚   â”œâ”€â”€ dtos/
â”‚   â”‚   â”œâ”€â”€ analysis_report.go
â”‚   â”‚   â””â”€â”€ performance_metrics.go
â”‚   â””â”€â”€ events/
â”‚       â””â”€â”€ performance_alert_handler.go
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ analysis_session.go
â”‚   â”‚   â””â”€â”€ metric.go
â”‚   â”œâ”€â”€ valueobjects/
â”‚   â”‚   â”œâ”€â”€ analysis_type.go
â”‚   â”‚   â””â”€â”€ threshold.go
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ analyzer.go
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â””â”€â”€ analysis_repository.go
â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â””â”€â”€ threshold_exceeded_event.go
â”‚   â””â”€â”€ exceptions/
â”‚       â””â”€â”€ analysis_error.go
â””â”€â”€ infrastructure/
    â”œâ”€â”€ adapters/
    â”‚   â””â”€â”€ profiler_adapter.go
    â”œâ”€â”€ persistence/
    â”‚   â”œâ”€â”€ repositories/
    â”‚   â”‚   â””â”€â”€ analysis_repository_timeseries.go
    â”‚   â””â”€â”€ models/
    â”‚       â””â”€â”€ metric_model.go
    â”œâ”€â”€ clients/
    â”‚   â””â”€â”€ monitoring_client.go
    â””â”€â”€ config/
        â””â”€â”€ analysis_config.go
```

## 3. å…±äº«åŸºç¡€è®¾æ–½è®¾è®¡

### 3.1 Shared Infrastructureï¼ˆå…±äº«åŸºç¡€è®¾æ–½ï¼‰

**ç›®å½•ç»“æ„**:
```
internal/infrastructure/shared/
â”œâ”€â”€ cache/                      # ç¼“å­˜æœåŠ¡
â”‚   â”œâ”€â”€ ristretto_cache.go
â”‚   â””â”€â”€ cache_interface.go
â”œâ”€â”€ logging/                    # æ—¥å¿—æœåŠ¡
â”‚   â”œâ”€â”€ slog_logger.go
â”‚   â””â”€â”€ logger_interface.go
â”œâ”€â”€ metrics/                    # ç›‘æ§æœåŠ¡
â”‚   â”œâ”€â”€ prometheus_metrics.go
â”‚   â””â”€â”€ metrics_interface.go
â”œâ”€â”€ config/                     # é…ç½®æœåŠ¡
â”‚   â”œâ”€â”€ koanf_config.go
â”‚   â””â”€â”€ config_interface.go
â””â”€â”€ utils/                      # å…±äº«å·¥å…·
    â”œâ”€â”€ id_generator.go
    â””â”€â”€ time_utils.go
```

### 3.2 External Infrastructureï¼ˆå¤–éƒ¨ç³»ç»Ÿé€‚é…å™¨ï¼‰

**ç›®å½•ç»“æ„**:
```
internal/infrastructure/external/
â”œâ”€â”€ compiler/                   # ç¼–è¯‘å™¨å·¥å…·é“¾é€‚é…
â”‚   â”œâ”€â”€ ocaml/                  # OCaml å·¥å…·é“¾
â”‚   â”‚   â”œâ”€â”€ ocamllex_adapter.go # è¯æ³•åˆ†æå™¨é€‚é…
â”‚   â”‚   â”œâ”€â”€ menhir_adapter.go   # è¯­æ³•åˆ†æå™¨é€‚é…
â”‚   â”‚   â””â”€â”€ ocaml_compiler.go   # OCaml ç¼–è¯‘å™¨è°ƒç”¨
â”‚   â”œâ”€â”€ llvm/                   # LLVM å·¥å…·é“¾
â”‚   â”‚   â”œâ”€â”€ ir_generator.go     # LLVM IR ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ opt_adapter.go      # ä¼˜åŒ–å™¨é€‚é…
â”‚   â”‚   â”œâ”€â”€ llc_adapter.go      # ä»£ç ç”Ÿæˆå™¨é€‚é…
â”‚   â”‚   â””â”€â”€ llvm_config.go      # LLVM é…ç½®
â”‚   â””â”€â”€ clang/                  # Clang å·¥å…·é“¾
â”‚       â”œâ”€â”€ assembler.go        # æ±‡ç¼–å™¨é€‚é…
â”‚       â”œâ”€â”€ linker.go           # é“¾æ¥å™¨é€‚é…
â”‚       â””â”€â”€ clang_driver.go     # Clang é©±åŠ¨å™¨
â”œâ”€â”€ aws/                        # AWS æœåŠ¡é€‚é…
â”‚   â”œâ”€â”€ s3_client.go
â”‚   â”œâ”€â”€ ec2_client.go
â”‚   â””â”€â”€ aws_config.go
â”œâ”€â”€ database/                   # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ postgres_client.go
â”‚   â”œâ”€â”€ mysql_client.go
â”‚   â””â”€â”€ connection_pool.go
â””â”€â”€ messaging/                  # æ¶ˆæ¯é˜Ÿåˆ—
    â”œâ”€â”€ kafka_client.go
    â”œâ”€â”€ rabbitmq_client.go
    â””â”€â”€ message_interface.go
```

### 3.3 DI Containerï¼ˆä¾èµ–æ³¨å…¥å®¹å™¨ï¼‰

**ç›®å½•ç»“æ„**:
```
internal/infrastructure/di/
â”œâ”€â”€ container.go                # ä¸»å®¹å™¨
â”œâ”€â”€ providers/                  # å„å±‚æä¾›è€…
â”‚   â”œâ”€â”€ infrastructure_providers.go
â”‚   â”œâ”€â”€ domain_providers.go
â”‚   â”œâ”€â”€ application_providers.go
â”‚   â””â”€â”€ module_providers.go
â””â”€â”€ interfaces.go               # å®¹å™¨æ¥å£
```

## 4. ç”¨ä¾‹åˆ°æ–‡ä»¶æ˜ å°„

### 4.1 é™ç•Œä¸Šä¸‹æ–‡ç”¨ä¾‹æ˜ å°„

#### å‰ç«¯å¤„ç†åŸŸ (Frontend Processing)

| ç”¨ä¾‹                           | æ–‡ä»¶è·¯å¾„                                 | æ–‡ä»¶å                         | ç±»å‹ |
| ------------------------------ | ---------------------------------------- | ------------------------------ | ---- |
| CreateEditSourceFileUseCase    | `modules/frontend/application/commands/` | `create_edit_source_file.go`   | å‘½ä»¤ |
| PerformLexicalAnalysisUseCase  | `modules/frontend/application/commands/` | `perform_lexical_analysis.go`  | å‘½ä»¤ |
| PerformSyntaxAnalysisUseCase   | `modules/frontend/application/commands/` | `perform_syntax_analysis.go`   | å‘½ä»¤ |
| PerformSemanticAnalysisUseCase | `modules/frontend/application/commands/` | `perform_semantic_analysis.go` | å‘½ä»¤ |
| HandleCompilationErrorsUseCase | `modules/frontend/application/commands/` | `handle_compilation_errors.go` | å‘½ä»¤ |

#### ä¸­ç«¯å¤„ç†åŸŸ (Middle-end Processing)

| ç”¨ä¾‹                              | æ–‡ä»¶è·¯å¾„                                  | æ–‡ä»¶å                             | ç±»å‹ |
| --------------------------------- | ----------------------------------------- | ---------------------------------- | ---- |
| GenerateIntermediateRepUseCase    | `modules/middleend/application/commands/` | `generate_intermediate_rep.go`     | å‘½ä»¤ |
| ApplyMachineIndependentOptUseCase | `modules/middleend/application/commands/` | `apply_machine_independent_opt.go` | å‘½ä»¤ |

#### åç«¯å¤„ç†åŸŸ (Backend Processing)

| ç”¨ä¾‹                      | æ–‡ä»¶è·¯å¾„                                | æ–‡ä»¶å                    | ç±»å‹ |
| ------------------------- | --------------------------------------- | ------------------------- | ---- |
| GenerateTargetCodeUseCase | `modules/backend/application/commands/` | `generate_target_code.go` | å‘½ä»¤ |
| PerformAssemblyUseCase    | `modules/backend/application/commands/` | `perform_assembly.go`     | å‘½ä»¤ |
| PerformLinkingUseCase     | `modules/backend/application/commands/` | `perform_linking.go`      | å‘½ä»¤ |

#### è¿è¡Œæ—¶è°ƒè¯•åŸŸ (Runtime & Debugging)

| ç”¨ä¾‹                      | æ–‡ä»¶è·¯å¾„                                | æ–‡ä»¶å                   | ç±»å‹ |
| ------------------------- | --------------------------------------- | ------------------------ | ---- |
| RunDebugProgramUseCase    | `modules/runtime/application/commands/` | `run_debug_program.go`   | å‘½ä»¤ |
| AnalyzePerformanceUseCase | `modules/runtime/application/queries/`  | `analyze_performance.go` | æŸ¥è¯¢ |

#### é¡¹ç›®ç®¡ç†åŸŸ (Project Management)

| ç”¨ä¾‹                     | æ–‡ä»¶è·¯å¾„                                | æ–‡ä»¶å                   | ç±»å‹ |
| ------------------------ | --------------------------------------- | ------------------------ | ---- |
| ManageEchoProjectUseCase | `modules/project/application/commands/` | `manage_echo_project.go` | å‘½ä»¤ |
| DeployApplicationUseCase | `modules/project/application/commands/` | `deploy_application.go`  | å‘½ä»¤ |

#### AIç‰¹æ€§åŸŸ (AI Features)

| ç”¨ä¾‹                          | æ–‡ä»¶è·¯å¾„                           | æ–‡ä»¶å                         | ç±»å‹ |
| ----------------------------- | ---------------------------------- | ------------------------------ | ---- |
| ConfigureUseAIFeaturesUseCase | `modules/ai/application/commands/` | `configure_use_ai_features.go` | å‘½ä»¤ |

### 4.2 æ–‡ä»¶å‘½åè§„èŒƒ

#### åº”ç”¨å±‚æ–‡ä»¶å‘½å
- **åº”ç”¨æœåŠ¡**: `{context}_service.go`
- **å‘½ä»¤å¯¹è±¡**: `{action}_{resource}.go`
- **æŸ¥è¯¢å¯¹è±¡**: `get_{resource}_{condition}.go`
- **DTOå¯¹è±¡**: `{resource}_{purpose}.go`
- **äº‹ä»¶å¤„ç†å™¨**: `{event}_handler.go`

#### é¢†åŸŸå±‚æ–‡ä»¶å‘½å
- **å®ä½“**: `{entity}.go`
- **å€¼å¯¹è±¡**: `{valueobject}.go`
- **é¢†åŸŸæœåŠ¡**: `{domain}_service.go`
- **ä»“å‚¨æ¥å£**: `{entity}_repository.go`
- **é¢†åŸŸäº‹ä»¶**: `{event}.go`
- **é¢†åŸŸå¼‚å¸¸**: `{error}_error.go`

#### åŸºç¡€è®¾æ–½å±‚æ–‡ä»¶å‘½å
- **é€‚é…å™¨**: `{target}_adapter.go`
- **ä»“å‚¨å®ç°**: `{entity}_repository_{tech}.go`
- **å®¢æˆ·ç«¯**: `{service}_client.go`
- **é…ç½®**: `{component}_config.go`

## 5. ä¾èµ–å…³ç³»å›¾

### 5.1 æ¨¡å—ä¾èµ–å…³ç³»

```
ProjectContext â†’ CompilerContext â†’ RuntimeContext â†’ AnalysisContext
                    â†“
                 AIContext
```

### 5.2 å±‚é—´ä¾èµ–å…³ç³»

```
Presentation Layer
        â†“
Application Layer (Use Cases)
        â†“
Domain Layer (Business Rules)
        â†‘
Infrastructure Layer (Technical Details)
```

### 5.3 åŸºç¡€è®¾æ–½ä¾èµ–å…³ç³»

```
ä¸šåŠ¡æ¨¡å— Infrastructure
    â†“ (å¯é€‰ä¾èµ–)
å…±äº« Infrastructure
    â†“ (å°è£…è°ƒç”¨)
å¤–éƒ¨ç³»ç»Ÿ (AWS, DB, OCamlç­‰)
```

## 6. é…ç½®ç®¡ç†

### 6.1 é…ç½®å±‚æ¬¡ç»“æ„

```
global config (koanf)
â”œâ”€â”€ compiler config
â”œâ”€â”€ runtime config
â”œâ”€â”€ ai config
â”œâ”€â”€ project config
â””â”€â”€ analysis config
```

### 6.2 é…ç½®åŠ è½½é¡ºåº

1. **ç¯å¢ƒå˜é‡**: `ECHO_COMPILER_PATH`, `ECHO_OCAML_PATH`
2. **é…ç½®æ–‡ä»¶**: `config.yaml`, `config.json`
3. **é»˜è®¤å€¼**: ç¼–è¯‘æ—¶åµŒå…¥çš„é»˜è®¤é…ç½®

## 7. æ„å»ºå’Œéƒ¨ç½²

### 7.1 æ„å»ºè„šæœ¬

**scripts/build.sh**:
```bash
#!/bin/bash
# æ„å»ºæ‰€æœ‰æ¨¡å—
for module in compiler runtime ai project analysis; do
    echo "Building module: $module"
    go build ./internal/modules/$module/...
done

# æ„å»ºå‘½ä»¤è¡Œå·¥å…·
echo "Building CLI tools"
go build -o bin/compiler ./cmd/compiler
go build -o bin/repl ./cmd/repl
```

### 7.2 ä¾èµ–ç®¡ç†

**go.mod**:
```
module github.com/echo-lang/echo

go 1.21

require (
    github.com/samber/do v1.8.0
    github.com/koanf/koanf v1.5.0
    github.com/dgraph-io/ristretto v0.1.1
    github.com/go-playground/validator/v10 v10.14.0
    github.com/samber/lo v1.38.1
    // OCaml ç›¸å…³ä¾èµ–
)
```

## 8. æµ‹è¯•ç»“æ„

### 8.1 æµ‹è¯•ç›®å½•ç»“æ„

```
internal/modules/{context}/
â”œâ”€â”€ application/
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ compiler_service_test.go
â”‚       â””â”€â”€ compiler_service_integration_test.go
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ entities/
â”‚       â””â”€â”€ compilation_task_test.go
â”‚   â”œâ”€â”€ services/
â”‚       â””â”€â”€ compilation_service_test.go
â”‚   â””â”€â”€ repositories/
â”‚       â””â”€â”€ compilation_task_repository_test.go
â””â”€â”€ infrastructure/
    â”œâ”€â”€ adapters/
    â”‚   â””â”€â”€ ocaml_compiler_adapter_test.go
    â”œâ”€â”€ persistence/
    â”‚   â””â”€â”€ repositories/
    â”‚       â””â”€â”€ compilation_task_repository_gorm_test.go
    â””â”€â”€ clients/
        â””â”€â”€ ocaml_client_test.go
```

### 8.2 æµ‹è¯•æ•°æ®

```
testdata/
â”œâ”€â”€ fixtures/
â”‚   â”œâ”€â”€ valid_echo_code.eo
â”‚   â”œâ”€â”€ invalid_echo_code.eo
â”‚   â””â”€â”€ complex_ai_agent.eo
â””â”€â”€ samples/
    â”œâ”€â”€ compilation_results.json
    â””â”€â”€ runtime_outputs.txt
```

## 9. æ–‡æ¡£ç»“æ„

### 9.1 API æ–‡æ¡£

```
docs/api/
â”œâ”€â”€ compiler.md      # ç¼–è¯‘å™¨API
â”œâ”€â”€ runtime.md       # è¿è¡Œæ—¶API
â”œâ”€â”€ ai.md           # AIç‰¹æ€§API
â”œâ”€â”€ project.md      # é¡¹ç›®ç®¡ç†API
â””â”€â”€ analysis.md     # åˆ†æå·¥å…·API
```

### 9.2 ä½¿ç”¨æŒ‡å—

```
docs/guides/
â”œâ”€â”€ getting-started.md
â”œâ”€â”€ compiler-usage.md
â”œâ”€â”€ ai-features.md
â”œâ”€â”€ deployment.md
â””â”€â”€ troubleshooting.md
```

## 10. è´¨é‡ä¿è¯

### 10.1 ä»£ç è´¨é‡æ£€æŸ¥

**scripts/test.sh**:
```bash
#!/bin/bash
# è¿è¡Œå•å…ƒæµ‹è¯•
go test ./internal/... -v -coverprofile=coverage.out

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
go tool cover -html=coverage.out -o coverage.html

# è¿è¡Œé›†æˆæµ‹è¯•
go test ./test/integration/... -v

# ä»£ç è´¨é‡æ£€æŸ¥
golangci-lint run

# å®‰å…¨æ£€æŸ¥
gosec ./...
```

### 10.2 CI/CD æµæ°´çº¿

**scripts/ci.sh**:
```bash
#!/bin/bash
# å®‰è£…ä¾èµ–
go mod download

# æ„å»º
./scripts/build.sh

# æµ‹è¯•
./scripts/test.sh

# æ€§èƒ½æµ‹è¯•
./scripts/benchmark.sh

# éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
./scripts/deploy.sh staging
```

## 11. æ¼”è¿›è§„åˆ’

### 11.1 ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆ3ä¸ªæœˆï¼‰

**ç›®æ ‡**: å®ç°åŸºæœ¬çš„ç¼–è¯‘å’Œè¿è¡ŒåŠŸèƒ½
```
âœ… CompilerContext åŸºç¡€ç¼–è¯‘åŠŸèƒ½
âœ… RuntimeContext åŸºæœ¬æ‰§è¡Œç¯å¢ƒ
âœ… ProjectContext é¡¹ç›®ç®¡ç†
ğŸ”„ AIContext åŸºç¡€å¹¶å‘æ”¯æŒ
ğŸ”„ AnalysisContext åŸºç¡€æ€§èƒ½ç›‘æ§
```

### 11.2 ç¬¬äºŒé˜¶æ®µï¼šAIç‰¹æ€§ï¼ˆ6ä¸ªæœˆï¼‰

**ç›®æ ‡**: æ·±åº¦é›†æˆAIç‰¹æ€§å’Œé«˜çº§å¹¶å‘
```
âœ… CompilerContext OCaml ä¼˜åŒ–
âœ… RuntimeContext GC è°ƒä¼˜
âœ… AIContext Agent ç¼–ç¨‹æ¨¡å‹
âœ… AnalysisContext AIæ€§èƒ½åˆ†æ
ğŸ”„ ç¬¬ä¸‰æ–¹AIæ¨¡å‹é›†æˆ
```

### 11.3 ç¬¬ä¸‰é˜¶æ®µï¼šä¼ä¸šçº§åŠŸèƒ½ï¼ˆ12ä¸ªæœˆï¼‰

**ç›®æ ‡**: ä¼ä¸šçº§éƒ¨ç½²å’Œç”Ÿæ€å»ºè®¾
```
âœ… å¤šç›®æ ‡ç¼–è¯‘æ”¯æŒ
âœ… åˆ†å¸ƒå¼è¿è¡Œæ—¶
âœ… ä¼ä¸šå®‰å…¨ç‰¹æ€§
âœ… æ’ä»¶ç³»ç»Ÿ
âœ… ç¤¾åŒºå·¥å…·é“¾
```

è¿™ä¸ªç›®å½•ç»“æ„è®¾è®¡ä¸ºEcho Languageé¡¹ç›®çš„é•¿æœŸå‘å±•æä¾›äº†æ¸…æ™°çš„ç»„ç»‡æ¡†æ¶ï¼Œæ—¢ä¿è¯äº†DDDæ¶æ„çš„çº¯æ´æ€§ï¼Œåˆè€ƒè™‘äº†Goè¯­è¨€çš„ç‰¹æ€§å’Œé¡¹ç›®çš„æŠ€æœ¯æ ˆè¦æ±‚ã€‚
